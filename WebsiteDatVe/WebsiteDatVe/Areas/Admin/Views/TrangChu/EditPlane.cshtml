@model WebsiteDatVe.Models.MayBay
@{
    ViewBag.Title = "EditPlane";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<style>
    .width-50 {
        width: 95%
    }
</style>

<div class="card-table" style="background-color: #f5f7ff; width:100%">
    <div class="card" style="margin: 24px 16px;">
        <div class="card-body">
            <h4 class="card-title">
                <a href="/Admin/TrangChu/Plane">Quản lý máy bay</a> >
                <span class="card-description">
                    Sửa thông tin máy bay
                </span>
            </h4>
            <div class="forms-sample">
                <div style="display:flex; justify-content:space-between">
                    <div style="width:100%">
                        <div class="form-group width-50">
                            <label for="exampleSelectGender">Mã máy bay</label>
                            <input type="text" class="form-control" id="txtMaMayBay" value="@Model.MaMayBay" readonly>
                        </div>
                        <div class="form-group width-50">
                            <label for="exampleSelectGender">Hãng máy bay</label>
                            @Html.DropDownList("MaHangBay", null, new { @class = "form-control", @id = "MaHangBay", @style = "background-image: none" })
                        </div>
                        <div class="form-group width-50">
                            <label for="exampleInputEmail3">Ghế phổ thông</label>
                            <input type="number" class="form-control" id="txtPhoThong" value="@Model.SoGhePhoThong" placeholder="Số ghế phổ thông">
                        </div>
                    </div>
                    <div style="width:100%">
                        <div class="form-group width-50">
                            <label for="exampleInputEmail3">Ghế thương gia</label>
                            <input type="number" class="form-control" id="txtThuongGia" value="@Model.SoGheThuongGia" placeholder="Số ghế thương gia">
                        </div>
                        <div class="form-group width-50">
                            <label for="exampleInputEmail3">Ghế hạng nhất</label>
                            <input type="number" class="form-control" id="txtHangNhat" value="@Model.SoGheHangNhat" placeholder="Số ghế hạng nhất">
                        </div>
                        <div class="form-group width-50">
                            <label for="exampleInputEmail3">Ghế đặt biệt</label>
                            <input type="number" class="form-control" id="txtDatBiet" value="@Model.SoGhePhoThongDacBiet" placeholder="Số ghế đặt biệt">
                        </div>
                    </div>
                </div>
                   
                    <button class="btn btn-primary mr-2" id="btnDuyet">Sửa</button>
                    <a href="/Admin/TrangChu/Plane" class="btn btn-light">Thoát</a>
                </div>
        </div>
    </div>
</div>

<div class="modal" id="modalDuyet">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Xác nhận</h5>
                <button type="button" class="close" onclick="modalClose()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="btnMess">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="btnDongY">Đồng ý</button>
                <button type="button" class="btn btn-secondary" onclick="modalClose()">Đóng</button>
            </div>
        </div>
    </div>
</div>

@section Jsfooter{
    <script>
        var img = "" + $('#txtHinh').val();
        var trangthai = 2;
        var ma = $("#txtMaBai").val();
        $('#btnDuyet').on('click', function () {
            if ($("#txtPhoThong").val() > 0) {
                if ($("#txtThuongGia").val() > 0) {
                    if ($("#txtHangNhat").val() > 0) {
                        if ($("#txtDatBiet").val() > 0) {
                            if ($("#MaHangBay").val() != "") {
                                $('#btnMess').empty();
                                $('#btnMess').append('<p>Bạn chắc chắn sửa thông tin máy bay?</p>');
                                $('#modalDuyet').show();
                            } else {
                                alert("Vui lòng chọn hãng bay");
                            }
                        } else {
                            alert("Vui lòng nhập số ghế đặt biệt > 0");
                        }
                    } else {
                        alert("Vui lòng nhập số ghế hạng nhất > 0");
                    }
                } else {
                    alert("Vui lòng nhập số ghế thương gia > 0");
                }
            } else {
                alert("Vui lòng nhập số ghế phổ thông > 0");
            }
        });

        function modalClose() {
            $('#modalDuyet').hide();

        }
        $('#btnTuchoi').on('click', function () {
            trangthai = 1;
            $('#btnMess').empty();
            $('#btnMess').append('<p>Bạn chắc chắn từ chối bài viết</p>');
            $('#modalDuyet').show();

        });
        $('#btnDongY').click(function () {
            $.ajax({
                type: 'post',
                url: '/Admin/TrangChu/UpdatePhane',
                data: {
                    MaMayBay: $("#txtMaMayBay").val(),
                    GhePhoThong: $("#txtPhoThong").val(),
                    GheThuongGia: $("#txtThuongGia").val(),
                    GheHangNhat: $("#txtHangNhat").val(),
                    GheDatBiet: $("#txtDatBiet").val(),
                    MaHangBay: $("#MaHangBay").val(),
                },
                success: function (data) {
                    if (data.code == 200) {
                        alert("Thao tác thành công");
                        window.location = "/Admin/TrangChu/Plane";
                    }
                }

            });
        });


    </script>
}
